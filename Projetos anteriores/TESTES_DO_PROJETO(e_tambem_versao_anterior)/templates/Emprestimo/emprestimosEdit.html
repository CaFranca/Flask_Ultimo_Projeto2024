<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Empréstimo</title>
    <!-- Link para o arquivo de estilos CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>

    <header>
        <!-- Título da página de edição de empréstimo -->
        <h1>Editar Empréstimo</h1>
    </header>

    <main>
        <!-- Subtítulo informando que é um formulário de edição -->
        <h2>Formulário de Edição</h2>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
        {% for message in messages %}
        <div class="alert alert-warning" role="alert">
            {{ message }}
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <!-- Formulário para edição de um empréstimo específico -->
        <form action="{{ url_for('bp_loan.edit_emprestimo', emprestimo_id=emprestimo.id) }}" method="POST">

            <!-- Campo de edição para selecionar o usuário -->
            <div>
                <label for="usuario_id">Usuário:</label>
                <select id="usuario_id" name="usuario_id" required>
                    {% for usuario in usuarios %}
                    <option value="{{ usuario.id }}" {% if usuario.id == emprestimo.usuario_id %}selected{% endif %}>
                        {{ usuario.nome }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Campo de edição para selecionar o livro -->
            <div>
                <label for="livro_id">Livro:</label>
                <select id="livro_id" name="livro_id" required>
                    {% for livro in livros %}
                    <option value="{{ livro.id }}" {% if livro.id == emprestimo.livro_id %}selected{% endif %}>
                        {{ livro.titulo }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Campo de edição para a data do empréstimo -->
            <div>
                <label for="data_emprestimo">Data do Empréstimo:</label>
                <input type="date" id="data_emprestimo" name="data_emprestimo" 
                    value="{{ emprestimo.data_emprestimo }}" required>
            </div>

            <!-- Campo de edição para a data de devolução prevista -->
            <div>
                <label for="data_devolucao_prevista">Data Prevista de Devolução:</label>
                <input type="date" id="data_devolucao_prevista" name="data_devolucao_prevista" 
                    value="{{ emprestimo.data_devolucao_prevista }}" required>
            </div>



            <!-- Botão para submeter o formulário e salvar alterações -->
            <button type="submit">Salvar Alterações</button>
        </form>
    </main>

    <!-- Rodapé com link para voltar à lista de empréstimos -->
    <footer>
        <a href="{{ url_for('bp_loan.view_emprestimos') }}" class="button">Voltar para a lista de empréstimos</a>
    </footer>

</body>

</html>
